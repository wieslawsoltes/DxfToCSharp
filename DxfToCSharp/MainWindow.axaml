<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:AvaloniaEdit="clr-namespace:AvaloniaEdit;assembly=AvaloniaEdit"
        x:Class="DxfToCSharp.MainWindow"
        Title="Dxf to C#"
        Width="1024" Height="768">
  <DockPanel>
    <StackPanel DockPanel.Dock="Top" Orientation="Horizontal" Margin="8" Spacing="8">
      <Button Name="OpenButton" Content="Open DXF..." Click="OnOpenClicked"/>
      <Button Name="RunButton" Content="Compile &amp; Run" Click="OnRunClicked"/>
      <Button Name="OptionsButton" Content="Options" Click="OnOptionsClicked">
        <Button.Flyout>
          <Flyout Placement="BottomEdgeAlignedLeft">
            <Border Background="White" BorderBrush="#E0E0E0" BorderThickness="1" CornerRadius="8" 
                      Padding="12" Width="400">
               <ScrollViewer MaxHeight="600" VerticalScrollBarVisibility="Auto">
                 <StackPanel Spacing="8">
                   <!-- Header -->
                   <TextBlock Text="Generation Options" FontSize="16" FontWeight="Bold" 
                              Foreground="#333" HorizontalAlignment="Center" Margin="0,0,0,4"/>
                   
                   <!-- Quick Presets -->
                   <Expander Header="Quick Presets" IsExpanded="True" HorizontalAlignment="Stretch">
                     <StackPanel Spacing="6" Margin="0,6,0,0">
                       <ComboBox Name="PresetComboBox" PlaceholderText="Select a preset..." 
                                 SelectionChanged="OnPresetSelectionChanged" HorizontalAlignment="Stretch">
                         <ComboBoxItem Content="All Options" Tag="all"/>
                         <ComboBoxItem Content="Entities Only" Tag="entities"/>
                         <ComboBoxItem Content="Basic Geometry" Tag="basic"/>
                         <ComboBoxItem Content="Tables Only" Tag="tables"/>
                         <ComboBoxItem Content="Custom" Tag="custom" IsSelected="True"/>
                       </ComboBox>
                       <Button Name="ResetOptionsButton" Content="Reset to Defaults" 
                               Click="OnPresetResetClicked" HorizontalAlignment="Stretch"
                               Background="#F44336" Foreground="White" Padding="6"/>
                     </StackPanel>
                   </Expander>
                   
                   <!-- General Options -->
                   <Expander Header="General &amp; Code Structure" IsExpanded="True" HorizontalAlignment="Stretch">
                     <StackPanel Spacing="6" Margin="0,6,0,0">
                       <CheckBox Name="GenerateHeaderCheckBox" Content="Generate Header" IsChecked="True"/>
                       <CheckBox Name="GenerateUsingStatementsCheckBox" Content="Generate Using Statements" IsChecked="True"/>
                       <CheckBox Name="GenerateDetailedCommentsCheckBox" Content="Generate Detailed Comments" IsChecked="False"/>
                       <CheckBox Name="GroupEntitiesByTypeCheckBox" Content="Group Entities by Type" IsChecked="False"/>
                       <CheckBox Name="GenerateSaveCommentCheckBox" Content="Generate Save Comment" IsChecked="True"/>
                       <CheckBox Name="GenerateReturnStatementCheckBox" Content="Generate Return Statement" IsChecked="True"/>
                     </StackPanel>
                   </Expander>
                   
                   <!-- Table Definitions -->
                   <Expander Header="Table Definitions" IsExpanded="True" HorizontalAlignment="Stretch">
                     <StackPanel Spacing="6" Margin="0,6,0,0">
                       <CheckBox Name="GenerateLayersCheckBox" Content="Generate Layers" IsChecked="True"/>
                       <CheckBox Name="GenerateLinetypesCheckBox" Content="Generate Linetypes" IsChecked="True"/>
                       <CheckBox Name="GenerateTextStylesCheckBox" Content="Generate Text Styles" IsChecked="True"/>
                       <CheckBox Name="GenerateBlocksCheckBox" Content="Generate Blocks" IsChecked="True"/>
                       <CheckBox Name="GenerateDimensionStylesCheckBox" Content="Generate Dimension Styles" IsChecked="True"/>
                       <CheckBox Name="GenerateMLineStylesCheckBox" Content="Generate MLine Styles" IsChecked="True"/>
                     </StackPanel>
                   </Expander>
                   
                   <!-- Entity Types -->
                   <Expander Header="Entity Types" IsExpanded="True" HorizontalAlignment="Stretch">
                     <StackPanel Spacing="6" Margin="0,6,0,0">
                       <StackPanel Orientation="Horizontal" Spacing="6">
                         <CheckBox Name="GenerateEntitiesCheckBox" Content="Enable All Entities" IsChecked="True" 
                                   Checked="OnEntitiesCheckBoxChanged" Unchecked="OnEntitiesCheckBoxChanged"
                                   FontWeight="Medium" Foreground="#007ACC"/>
                       </StackPanel>
                       
                       <StackPanel Name="EntityOptionsPanel" Spacing="4">
                         <!-- Basic Geometry Group -->
                         <Expander Header="Basic Geometry" IsExpanded="True" Margin="0,2,0,0" HorizontalAlignment="Stretch">
                           <StackPanel Spacing="3" Margin="12,4,0,0">
                             <CheckBox Name="GenerateLineEntitiesCheckBox" Content="Lines" IsChecked="True"/>
                             <CheckBox Name="GenerateArcEntitiesCheckBox" Content="Arcs" IsChecked="True"/>
                             <CheckBox Name="GenerateCircleEntitiesCheckBox" Content="Circles" IsChecked="True"/>
                             <CheckBox Name="GenerateEllipseEntitiesCheckBox" Content="Ellipses" IsChecked="True"/>
                             <CheckBox Name="GeneratePolylineEntitiesCheckBox" Content="Polylines" IsChecked="True"/>
                             <CheckBox Name="GenerateSplineEntitiesCheckBox" Content="Splines" IsChecked="True"/>
                           </StackPanel>
                         </Expander>
                         
                         <!-- Text &amp; Annotations Group -->
                         <Expander Header="Text &amp; Annotations" IsExpanded="True" Margin="0,2,0,0" HorizontalAlignment="Stretch">
                           <StackPanel Spacing="3" Margin="12,4,0,0">
                             <CheckBox Name="GenerateTextEntitiesCheckBox" Content="Text" IsChecked="True"/>
                             <CheckBox Name="GenerateMTextEntitiesCheckBox" Content="MText" IsChecked="True"/>
                             <CheckBox Name="GenerateDimensionEntitiesCheckBox" Content="Dimensions" IsChecked="True"/>
                             <CheckBox Name="GenerateLeaderEntitiesCheckBox" Content="Leaders" IsChecked="True"/>
                           </StackPanel>
                         </Expander>
                         
                         <!-- 3D &amp; Complex Entities Group -->
                         <Expander Header="3D &amp; Complex Entities" IsExpanded="True" Margin="0,2,0,0" HorizontalAlignment="Stretch">
                           <StackPanel Spacing="3" Margin="12,4,0,0">
                             <CheckBox Name="GenerateSolidEntitiesCheckBox" Content="Solids" IsChecked="True"/>
                             <CheckBox Name="GenerateFace3dEntitiesCheckBox" Content="Face3D" IsChecked="True"/>
                             <CheckBox Name="GenerateInsertEntitiesCheckBox" Content="Inserts" IsChecked="True"/>
                             <CheckBox Name="GenerateMLineEntitiesCheckBox" Content="MLines" IsChecked="True"/>
                           </StackPanel>
                         </Expander>
                         
                         <!-- Other Entities Group -->
                         <Expander Header="Other Entities" IsExpanded="True" Margin="0,2,0,0" HorizontalAlignment="Stretch">
                           <StackPanel Spacing="3" Margin="12,4,0,0">
                             <CheckBox Name="GeneratePointEntitiesCheckBox" Content="Points" IsChecked="True"/>
                             <CheckBox Name="GenerateRayEntitiesCheckBox" Content="Rays" IsChecked="True"/>
                             <CheckBox Name="GenerateXLineEntitiesCheckBox" Content="XLines" IsChecked="True"/>
                             <CheckBox Name="GenerateWipeoutEntitiesCheckBox" Content="Wipeouts" IsChecked="True"/>
                           </StackPanel>
                         </Expander>
                       </StackPanel>
                     </StackPanel>
                   </Expander>
                 </StackPanel>
               </ScrollViewer>
            </Border>
          </Flyout>
        </Button.Flyout>
      </Button>
    </StackPanel>
    <!-- Notification Area -->
    <Border Name="NotificationBorder" DockPanel.Dock="Top" 
            Background="#4CAF50" Margin="8,0,8,8" Padding="12,8" 
            CornerRadius="4" IsVisible="False">
      <DockPanel>
        <Button Name="CloseNotificationButton" Content="Ã—" 
                Background="Transparent" Foreground="White" 
                BorderThickness="0" DockPanel.Dock="Right" 
                Click="OnCloseNotificationClicked"/>
        <TextBlock Name="NotificationText" Foreground="White" FontWeight="Medium"/>
      </DockPanel>
    </Border>
    <Grid ColumnDefinitions="*,Auto,*" RowDefinitions="*" Margin="8">
      <Grid.Styles>
        <Style Selector="TextBox">
          <Setter Property="FontFamily" Value="Consolas, Menlo, Monaco, 'Courier New', monospace"/>
          <Setter Property="FontSize" Value="13"/>
        </Style>
      </Grid.Styles>
      <Border Grid.Column="0" BorderBrush="#3A3A3A" BorderThickness="1" CornerRadius="4">
        <AvaloniaEdit:TextEditor Name="LeftTextBox"
                                 IsReadOnly="True"
                                 ShowLineNumbers="True"
                                 WordWrap="False"
                                 FontFamily="Cascadia Code,Consolas,Menlo,Monospace"/>
      </Border>
      <GridSplitter Grid.Column="1" Width="8" Background="Transparent" HorizontalAlignment="Center" VerticalAlignment="Stretch"/>
      <Border Grid.Column="2" BorderBrush="#3A3A3A" BorderThickness="1" CornerRadius="4">
        <TabControl Name="RightTabControl">
          <TabItem Header="Code">
            <AvaloniaEdit:TextEditor Name="RightTextBox"
                                     IsReadOnly="True"
                                     ShowLineNumbers="True"
                                     WordWrap="True"
                                     FontFamily="Cascadia Code,Consolas,Menlo,Monospace"/>
          </TabItem>
          <TabItem Header="Errors">
            <ScrollViewer>
              <TextBox Name="ErrorsTextBox"
                       AcceptsReturn="True"
                       AcceptsTab="True"
                       TextWrapping="Wrap"
                       IsReadOnly="True"
                       ScrollViewer.HorizontalScrollBarVisibility="Auto"
                       ScrollViewer.VerticalScrollBarVisibility="Auto"/>
            </ScrollViewer>
          </TabItem>
        </TabControl>
      </Border>
    </Grid>
  </DockPanel>
</Window>
